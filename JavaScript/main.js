/* PRODUCTOS*/
const productos = [
    /*CAMISETAS*/
    {
      ID: "Camiseta-01",
      titulo: "Camiseta 01",
      imagen: "./Images/Camisetas/01.jpg",
      categoria: {  nombre: "Camisetas", 
                    id: "camisetas" },
      precio: 600,
    },
    {
      ID: "Camiseta-02",
      titulo: "Camiseta 02",
      imagen: "./Images/Camisetas/02.jpg",
      categoria: {  nombre: "Camisetas", 
                    id: "camisetas" },
      precio: 800,
    },
    {
      ID: "Camiseta-03",
      titulo: "Camiseta 03",
      imagen: "./Images/Camisetas/03.jpg",
      categoria: {  nombre: "Camisetas", 
                    id: "camisetas" },
      precio: 650,
    },
    {
      ID: "Camiseta-04",
      titulo: "Camiseta 04",
      imagen: "./Images/Camisetas/04.jpg",
      categoria: {  nombre: "Camisetas", 
                    id: "camisetas" },
      precio: 900,
    },
    {
      ID: "Camiseta-05",
      titulo: "Camiseta 05",
      imagen: "./Images/Camisetas/05.jpg",
      categoria: {  nombre: "Camisetas", 
                    id: "camisetas"},
      precio: 990,
    },
    {
        ID: "Camiseta-06",
        titulo: "Camiseta 06",
        imagen: "./Images/Camisetas/06.jpg",
        categoria: {  nombre: "Camisetas", 
                      id: "camisetas"},
      precio: 740,
      },
      {
        ID: "Camiseta-07",
        titulo: "Camiseta 07",
        imagen: "./Images/Camisetas/07.jpg",
        categoria: {  nombre: "Camisetas", 
                      id: "camisetas"},
      precio: 1000,
      },
      {
        ID: "Camiseta-08",
        titulo: "Camiseta 08",
        imagen: "./Images/Camisetas/08.jpg",
        categoria: {  nombre: "Camisetas", 
                      id: "camisetas"},
      precio: 950,
      },
      {
        ID: "Camiseta-09",
        titulo: "Camiseta 09",
        imagen: "./Images/Camisetas/09.jpg",
        categoria: {  nombre: "Camisetas", 
                      id: "camisetas"},
      precio: 1200,
      },
      {
        ID: "Camiseta-10",
        titulo: "Camiseta 10",
        imagen: "./Images/Camisetas/10.jpg",
        categoria: {  nombre: "Camisetas", 
                      id: "camisetas"},
      precio: 1500,
      },
      
    // PANTALONES
  
     {
        ID: "Pantalon-01",
        titulo: "Pantalon 01",
        imagen: "./Images/Pantalones/01.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      {
        ID: "Pantalon-02",
        titulo: "Pantalon 02",
        imagen: "./Images/Pantalones/02.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      {
        ID: "Pantalon-03",
        titulo: "Pantalon 03",
        imagen: "./Images/Pantalones/03.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      {
        ID: "Pantalon-04",
        titulo: "Pantalon 04",
        imagen: "./Images/Pantalones/04.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      {
        ID: "Pantalon-05",
        titulo: "Pantalon 05",
        imagen: "./Images/Pantalones/05.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      {
        ID: "Pantalon-06",
        titulo: "Pantalon 06",
        imagen: "./Images/Pantalones/06.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      {
        ID: "Pantalon-07",
        titulo: "Pantalon 07",
        imagen: "./Images/Pantalones/07.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      {
        ID: "Pantalon-08",
        titulo: "Pantalon 08",
        imagen: "./Images/Pantalones/08.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      {
        ID: "Pantalon-09",
        titulo: "Pantalon 09",
        imagen: "./Images/Pantalones/09.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      {
        ID: "Pantalon-10",
        titulo: "Pantalon 10",
        imagen: "./Images/Pantalones/10.jpg",
        categoria: {  nombre: "Pantalones", 
                      id: "Pantalones"},
      precio: 1500,
      },
      // ZAPATOS
  
     {
        ID: "Zapato-01",
        titulo: "Zapato 01",
        imagen: "./Images/Zapatos/01.jpg",
        categoria: {  nombre: "Zapatos", 
                      id: "Zapatos"},
      precio: 1000,
      },
      {
        ID: "Zapato-02",
        titulo: "Zapato 02",
        imagen: "./Images/Zapatos/02.jpg",
        categoria: {  nombre: "Zapatos", 
                      id: "Zapatos"},
      precio: 1200,
      },
      {
        ID: "Zapato-03",
        titulo: "Zapato 03",
        imagen: "./Images/Zapatos/03.jpg",
        categoria: {  nombre: "Zapatos", 
                      id: "Zapatos"},
      precio: 1500,
      },
      {
        ID: "Zapato-04",
        titulo: "Zapato 04",
        imagen: "./Images/Zapatos/04.jpg",
        categoria: {  nombre: "Zapatos", 
                      id: "Zapatos"},
      precio: 1100,
      },
      {
        ID: "Zapato-05",
        titulo: "Zapato 05",
        imagen: "./Images/Zapatos/05.jpg",
        categoria: {  nombre: "Zapatos", 
                      id: "Zapatos"},
      precio: 1400,
      },
      {
        ID: "Zapato-06",
        titulo: "Zapato 06",
        imagen: "./Images/Zapatos/06.jpg",
        categoria: {  nombre: "Zapatos", 
                      id: "Zapatos"},
      precio: 1350,
      },
      {
        ID: "Zapato-07",
        titulo: "Zapato 07",
        imagen: "./Images/Zapatos/07.jpg",
        categoria: {  nombre: "Zapatos", 
                      id: "Zapatos"},
      precio: 1150,
      },
      {
        ID: "Zapato-08",
        titulo: "Zapato 08",
        imagen: "./Images/Zapatos/08.jpg",
        categoria: {  nombre: "Zapatos", 
                      id: "Zapatos"},
      precio: 1600,
      },
      {
        ID: "Zapato-09",
        titulo: "Zapato 09",
        imagen: "./Images/Zapatos/09.jpg",
        categoria: {  nombre: "Zapatos", 
                      id: "Zapatos"},
      precio: 1200,
      },
      {
        ID: "Zapato-10",
        titulo: "Zapato 10",
        imagen: "./Images/Zapatos/10.jpg",
        categoria: { nombre:"Zapatos", 
                      id: "Zapatos"},
      precio: 1400,
      },
];
  


const contenedorProductos = document.querySelector("#contenedor__Productos");
const botonesCategorias = document.querySelectorAll(".boton__Categoria");
const tituloPrincipal = document.querySelector("#titulo__Principal");
let botonesAgregar = document.querySelectorAll(".producto__Agregar");
const numerito = document.querySelector("#numerito");

function cargarProductos(productosElegidos){

    contenedorProductos.innerHTML=""
    productosElegidos.forEach(producto =>{

        const div = document.createElement("div");
        div.classList.add("Producto");
        div.innerHTML= `
                    <img class="producto__Imagen" src="${producto.imagen}" alt="${producto.titulo} ">
                    <div class="producto__Detalles">
                        <h3 class="producto__Titulo">${producto.titulo}</h3>
                        <p class="producto__Precio"> $${producto.precio}</p>
                        <button class="producto__Agregar" id="${producto.ID}" >Agregar</button>
                    </div>
        `;

        contenedorProductos.append(div)

    })

    actualizarBotonesAgregar()
}
cargarProductos(productos);

botonesCategorias.forEach(boton =>{
    boton.addEventListener("click", (e) => {

        botonesCategorias.forEach(boton => boton.classList.remove("active"))
        e.currentTarget.classList.add("active");

        if (e.currentTarget.id != "todos") {
            const productoCategoria = productos.find(producto => producto.categoria.id === e.currentTarget.id);
            
            tituloPrincipal.innerText = productoCategoria.categoria.nombre;

            const productosBoton = productos.filter(producto => producto.categoria.id === e.currentTarget.id);

        cargarProductos(productosBoton);
    } else {
        tituloPrincipal.innerText = "Todos los Productos";
        cargarProductos(productos);
        }

    });
});

function actualizarBotonesAgregar (){
    botonesAgregar = document.querySelectorAll(".producto__Agregar");

    botonesAgregar.forEach(boton=> {
        boton.addEventListener("click", agregarAlCarrito);

    });
    
}

const productosEnCarrito = [];

function agregarAlCarrito(e){
    const idBoton = e.currentTarget.id;
    const productoAgregado = productos.find(producto => producto.ID === idBoton);

    if(productosEnCarrito.some(producto => producto.ID === idBoton)){
        const index = productosEnCarrito.findIndex(producto => producto.ID === idBoton);
        productosEnCarrito[index].cantidad++

    }else{
        productoAgregado.cantidad = 1; 
        productosEnCarrito.push(productoAgregado);
    }
    actualizarNumerito();
    localStorage.setItem("productos__En__Carrito", JSON.stringify(productosEnCarrito));
};

function actualizarNumerito(){
    let nuevoNumerito = productosEnCarrito.reduce((acc, producto) => acc + producto.cantidad, 0);
    numerito.innerText = nuevoNumerito;

};

